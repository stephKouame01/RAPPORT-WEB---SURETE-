<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>üöÇ Portail S√ªret√© SITARAIL - 4 Rapports</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #f4f6f8 0%, #e0e7ff 100%);
            min-height: 100vh;
        }
        header {
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
            color: white;
            padding: 2.5rem;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }
        header h1 { 
            font-size: 2.8rem; 
            font-weight: 300; 
            margin-bottom: 0.8rem;
            text-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }
        header p { opacity: 0.95; font-size: 1.3rem; }
        
        .tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            padding: 2rem;
            flex-wrap: wrap;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }
        .tabs button {
            padding: 14px 30px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #1f2937, #374151);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            min-width: 240px;
            position: relative;
        }
        .tabs button.active {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37,99,235,0.4);
        }
        .tabs button:hover:not(.active) {
            background: linear-gradient(135deg, #374151, #4b5563);
            transform: translateY(-1px);
        }
        .status-ok { border-left: 5px solid #10b981; }
        .status-wait { border-left: 5px solid #f59e0b; }
        
        .content { max-width: 1600px; margin: 0 auto; padding: 2rem; }
        .loading {
            display: none;
            text-align: center;
            color: #6b7280;
            font-size: 1.4rem;
            margin: 4rem 0;
            padding: 2rem;
            background: rgba(255,255,255,0.9);
            border-radius: 12px;
        }
        iframe {
            width: 100%;
            height: 78vh;
            min-height: 650px;
            border: none;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            transition: all 0.4s ease;
        }
        footer {
            text-align: center;
            padding: 3rem;
            color: #666;
            font-size: 1rem;
            background: rgba(255,255,255,0.9);
            margin-top: 3rem;
        }
        @media (max-width: 768px) {
            header h1 { font-size: 2.2rem; }
            .tabs button { min-width: 200px; padding: 12px 20px; font-size: 14px; }
            iframe { height: 72vh; min-height: 550px; }
        }
    </style>
</head>
<body>
    <header>
        <h1>üöÇ Portail Centralis√© S√ªret√© SITARAIL</h1>
        <p>CI & BF ‚Äì Tous les Rapports Power BI (4/4 collect√©s)</p>
    </header>

    <div class="tabs">
        <button class="status-wait" onclick="changerRapport('cctv', this)" title="Besoin publication publique Power BI">üìπ CCTV SITARAIL ‚è≥</button>
        <button class="status-wait" onclick="changerRapport('quipux', this)" title="Besoin publication publique Power BI">üìã RELEV√âS QUIPUX ‚è≥</button>
        <button class="status-ok active" onclick="changerRapport('niveauAlerte', this)" title="Fonctionne parfaitement">‚ö†Ô∏è NIVEAU D'ALERTE ‚úÖ</button>
        <button class="status-ok" onclick="changerRapport('sureteCIBF', this)" title="Fonctionne parfaitement">üìä S√õRET√â CI&BF ‚úÖ</button>
    </div>

    <div class="content">
        <div id="loading" class="loading">üîÑ Chargement du rapport Power BI...</div>
        <iframe 
            id="rapportIframe"
            src="https://app.powerbi.com/reportEmbed?reportId=adefadca-8e38-4a01-a128-daf86f4e1d09&ctid=088e9b00-ffd0-458e-bfa1-acf4c596d3cb"
            allowfullscreen 
            allow="camera; geolocation; microphone"
            sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
        </iframe>
    </div>

    <footer>
        ¬© 2026 ‚Äì SITARAIL | Portail S√ªret√© Centralis√© CI&BF | Powered by Power BI
        <br><small>üëà Cliquez les onglets verts pour naviguer | Orange = publication Power BI requise</small>
    </footer>

    <script>
        const rapports = {
            cctv: "https://app.powerbi.com/reportEmbed?reportId=ab84c6e7-f63f-44b0-a8da-3bbdb72aa213&ctid=088e9b00-ffd0-458e-bfa1-acf4c596d3cb",
            quipux: "https://app.powerbi.com/reportEmbed?reportId=815b3796-d4f4-416c-92e6-854de1eafae6&ctid=088e9b00-ffd0-458e-bfa1-acf4c596d3cb",
            niveauAlerte: "https://app.powerbi.com/reportEmbed?reportId=adefadca-8e38-4a01-a128-daf86f4e1d09&ctid=088e9b00-ffd0-458e-bfa1-acf4c596d3cb",
            sureteCIBF: "https://app.powerbi.com/reportEmbed?reportId=9c2c69db-1446-4017-b957-a454469f9b86&ctid=088e9b00-ffd0-458e-bfa1-acf4c596d3cb"
        };

        function changerRapport(rapportKey, bouton) {
            const iframe = document.getElementById("rapportIframe");
            const loading = document.getElementById("loading");
            
            // Reset iframe
            iframe.src = '';
            iframe.style.opacity = "0.3";
            loading.style.display = "block";
            
            // Switch onglet actif
            document.querySelectorAll(".tabs button").forEach(btn => 
                btn.classList.remove("active"));
            bouton.classList.add("active");
            
            // Load nouveau rapport
            setTimeout(() => {
                iframe.src = rapports[rapportKey];
            }, 500);
            
            // Timeout s√©curit√©
            const maxWait = setTimeout(() => {
                iframe.style.opacity = "1";
                loading.style.display = "none";
            }, 10000);
            
            iframe.onload = function() {
                iframe.style.opacity = "1";
                loading.style.display = "none";
                clearTimeout(maxWait);
            };
        }
    </script>
</body>
</html>
